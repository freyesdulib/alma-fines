"use strict";var fines={checkApis:function(){var e="https://"+document.domain+"/api/status/authorize",t="https://"+document.domain+"/api/status/alma",a=[e,t],s=new XMLHttpRequest;a.forEach(function(e){s.open("POST",e),s.onload=function(){200!==s.status&&($("form").hide(),$("#apiMessage").html("The Fines & Fees payment system is currently unavailable.  We're sorry for the inconvenience.   Please try again later."))},s.send(null)})},saveBalance:function(e){sessionStorage.removeItem("userBalance"),sessionStorage.setItem("userBalance",e)},disableButton:function(e,t){$("#"+e).click(function(){$(this).prop("disabled",!0),$(this).empty().append(t),$(this).parents("form").submit()})},pay:function(e,t,a){$("#"+e).click(function(){$(this).prop("disabled",!0),$("#cancel").hide(),$(this).empty().append("Processing Payment..."),$(this).parents("form").submit()})},checkStatus:function(){var e=window.location.search.split("="),t=e[e.length-1];"1"===t?($("#message").html('<div class="alert alert-success"><i class="fa fa-check-circle"></i> Payment was successful.</div>'),setTimeout(function(){$("#message").empty(),window.location.href=location.protocol+"//"+document.domain+":"+location.port+"/login"},1e4)):"0"===t&&($("#message").html('<div class="alert alert-danger"><i class="fa fa-exclamation-triangle"></i> Payment failed.</div>'),setTimeout(function(){$("#message").empty()},5e3))},cancel:function(){$("#cancel").click(function(){$(this).prop("disabled",!0),$(this).empty().append("Cancelling...")})},getBalance:function(){return sessionStorage.getItem("userBalance")},calculateBalance:function(){$('input[type="checkbox"]').on("click",function(){var e,t,a,s=fines.getBalance(),n=parseFloat($(this).val()),i=$(this).is(":checked");if(s=JSON.parse(s),e=parseFloat(s.total),t=i?e+n:e-n,a={total:parseFloat(t).toFixed(2)},"0.00"===a.total){var o='<div class="alert alert-danger"><strong>You must select at least one fine to pay.</strong></div>';$("#payOnline").prop("disabled",!0),$("#message").css("color","red").html(o)}else $("#payOnline").prop("disabled",!1),$("#message").html("");fines.saveBalance(JSON.stringify(a)),$("#balance").html("$"+a.total),$("#fineTotal").val(a.total)})}};